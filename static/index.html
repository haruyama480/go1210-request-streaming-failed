<html>
	<head>
		<meta charset="utf-8"/>
		<script src="wasm_exec.js"></script>

	</head>
	<body>
		<h1>WASM Experiments</h1>
		<div id="target"></div>
		<script>
			if (!WebAssembly.instantiateStreaming) {
				WebAssembly.instantiateStreaming = async (resp, importObject) => {
					const source = await (await resp).arrayBuffer()
					return await WebAssembly.instantiate(source, importObject)
				}
			}

			const go = new Go();
			let mod, inst;
			WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject)
				.then((result) => {
					console.log("main.wasm is loaded")
					mod = result.module;
					inst = result.instance;
					go.run(inst);
				}).catch((err) => {
					console.error(err);
				});
		</script>
	</body>
</html>
